"use strict";!function(z){z.fn.circliful=function(e,T){var S=z.extend({foregroundColor:"#3498DB",backgroundColor:"#ccc",pointColor:"none",fillColor:"none",foregroundBorderWidth:15,backgroundBorderWidth:15,pointSize:28.5,fontColor:"#aaa",percent:75,animation:1,animationStep:5,icon:"none",iconSize:"30",iconColor:"#ccc",iconPosition:"top",target:0,start:0,showPercent:1,percentageTextSize:22,percentageX:100,percentageY:113,textAdditionalCss:"",targetPercent:0,targetTextSize:17,targetColor:"#2980B9",text:null,textStyle:null,textColor:"#666",textY:null,textX:null,multiPercentage:0,percentages:[],multiPercentageLegend:0,textBelow:!1,noPercentageSign:!1,replacePercentageByText:null,halfCircle:!1,animateInView:!1,decimals:0,alwaysDecimals:!1,title:"Circle Chart",description:"",progressColor:null},e);return this.each(function(){function l(){var e=h,t=B;if(1===S.multiPercentage){var r,o,n=S.percentages,l=360;for(r=0;r<n.length;++r)t=l/100*(o=n[r].percent),0<r&&(t=(l+=62.5)/100*o),a(e=i.find("#circle"+(r+1)),t,l,o)}else a(e,t,360,o)}function a(r,e,o,t){var n=window.setInterval(function(){e<=k?(window.clearInterval(n),w=1,"function"==typeof T&&T.call(this)):(k+=m,P+=b),S.halfCircle?t<=2*k/(o/100)&&1===w&&(k=o/100*t/2):t<=k/(o/100)&&1===w&&(k=o/100*t),P>S.target&&1===w&&(P=S.target),null===S.replacePercentageByText&&(v=(v=S.halfCircle?parseFloat(100*k/o*2):parseFloat(100*k/o)).toFixed(S.decimals),!S.alwaysDecimals&&(0===t||1<t&&1!==w)&&(v=parseInt(v))),r.attr("stroke-dasharray",k+", 20000"),1!==S.multiPercentage?1===S.showPercent?y.find(".number").text(v):(y.find(".number").text(P),y.find(".percent").text("")):(y.find(".number").text(""),y.find(".percent").text("")),null!==p&&z.each(p,function(e,t){S.halfCircle&&(e/=2),e*(o/100)<=k&&r.css({stroke:t,transition:"stroke 0.1s linear"})})}.bind(r),C)}function e(){var e,t,r,o,n;h.hasClass("start")||(e=-1!==navigator.userAgent.toLowerCase().indexOf("webkit")?"body":"html",t=z(e).scrollTop(),r=t+z(window).height(),o=Math.round(h.offset().top),n=o+h.height(),o<r&&t<n&&(h.addClass("start"),setTimeout(l,250),console.log()))}var t,r,i=z(this);t=S,r=i.data(),z.each(t,function(e){e.toLowerCase()in r&&(t[e]=r[e.toLowerCase()])});var s,d,x,o=S.percent,n=83,c=100,g=S.percentageY,f=S.percentageX,u=S.backgroundBorderWidth,p=S.progressColor;if(S.halfCircle?"left"===S.iconPosition?(c=80,f=117,g=n=100):S.halfCircle&&(n=80,g=100):"bottom"===S.iconPosition?(n=124,g=95):"left"===S.iconPosition?(c=80,n=110,f=117):"middle-v"===S.iconPosition?(1!==S.multiPercentage&&(d='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="133" y1="50" x2="140" y2="40" stroke-width="2"  /></g>',d+='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="140" y1="40" x2="200" y2="40" stroke-width="2"  /></g>',f=170,g=30),n=120):"middle-h"===S.iconPosition?(1!==S.multiPercentage&&(d='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="133" y1="50" x2="140" y2="40" stroke-width="2"  /></g>',d+='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="140" y1="40" x2="200" y2="40" stroke-width="2"  /></g>',f=170,g=30),n=130):"middle"===S.iconPosition?(1!==S.multiPercentage&&(d='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="133" y1="50" x2="140" y2="40" stroke-width="2"  /></g>',d+='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="140" y1="40" x2="200" y2="40" stroke-width="2"  /></g>',f=170,g=30),n=110):"right"===S.iconPosition?(c=120,n=110,f=80):"top"===S.iconPosition&&"none"!==S.icon&&(g=120),0<S.targetPercent&&!0!==S.halfCircle&&(g=95,d='<g stroke="'+("none"!==S.backgroundColor?S.backgroundColor:"#ccc")+'" ><line x1="75" y1="101" x2="125" y2="101" stroke-width="1"  /></g>',d+='<text text-anchor="middle" x="'+f+'" y="120" style="font-size: '+S.targetTextSize+'px;" fill="'+S.targetColor+'">'+S.targetPercent+(S.noPercentageSign&&null===S.replacePercentageByText?"":"%")+"</text>",d+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+S.backgroundColor+'" stroke-width="3" stroke-dasharray="450" transform="rotate(-90,100,100)" />',d+='<circle cx="100" cy="100" r="69" fill="none" stroke="'+S.targetColor+'" stroke-width="3" stroke-dasharray="'+4.35*S.targetPercent+', 20000" transform="rotate(-90,100,100)" />'),null!==S.text&&(S.halfCircle?S.textBelow?d+='<text text-anchor="middle" x="'+(null!==S.textX?S.textX:"100")+'" y="'+(null!==S.textY?S.textY:"64%")+'" style="'+S.textStyle+'" fill="'+S.textColor+'">'+S.text+"</text>":d+='<text text-anchor="middle" x="'+(null!==S.textX?S.textX:"100")+'" y="'+(null!==S.textY?S.textY:"115")+'" style="'+S.textStyle+'" fill="'+S.textColor+'">'+S.text+"</text>":S.textBelow?d+='<text text-anchor="middle" x="'+(null!==S.textX?S.textX:"100")+'" y="'+(null!==S.textY?S.textY:"99%")+'" style="'+S.textStyle+'" fill="'+S.textColor+'">'+S.text+"</text>":d+='<text text-anchor="middle" x="'+(null!==S.textX?S.textX:"100")+'" y="'+(null!==S.textY?S.textY:"115")+'" style="'+S.textStyle+'" fill="'+S.textColor+'">'+S.text+"</text>"),"none"!==S.icon&&(x='<text text-anchor="middle" x="'+c+'" y="'+n+'" class="icon" style="font-size: '+S.iconSize+'px" fill="'+S.iconColor+'">&#x'+S.icon+"</text>"),S.halfCircle){i.addClass("svg-container").append(z('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==d?d:"")+'<clipPath id="cut-off-bottom"> <rect x="100" y="0" width="100" height="200" /> </clipPath><circle cx="100" cy="100" r="57" class="border" fill="'+S.fillColor+'" stroke="'+S.backgroundColor+'" stroke-width="'+u+'" stroke-dasharray="360" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" class="border" fill="none" stroke="'+S.foregroundColor+'" stroke-width="'+S.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-180,100,100)" /><circle cx="100" cy="100" r="'+S.pointSize+'" fill="'+S.pointColor+'" clip-path="url(#cut-off-bottom)" transform="rotate(-90,100,100)" />'+x+'<text class="timer" text-anchor="middle" x="'+f+'" y="'+g+'" style="font-size: '+S.percentageTextSize+"px; "+s+";"+S.textAdditionalCss+'" fill="'+S.fontColor+'"><tspan class="number">'+(null===S.replacePercentageByText?0:S.replacePercentageByText)+'</tspan><tspan class="percent">'+(S.noPercentageSign||null!==S.replacePercentageByText?"":"%")+"</tspan></text>"))}else!function(){if(1===S.multiPercentage){var e,t,r,o,n,l=S.percentages,a=47,c=360;for(e=0;e<l.length;++e)r=l[e].percent,o=l[e].color,t=c/100*r,0<e&&(t=(c+=62.5)/100*r),n+='<circle cx="100" cy="100" r="'+(a+=10)+'" class="border" fill="'+S.fillColor+'" stroke="'+S.backgroundColor+'" stroke-width="'+u+'" stroke-dasharray="'+c+'" transform="rotate('+-90+',100,100)" /><circle class="circle" id="circle'+(e+1)+'" data-percent="'+r+'" cx="100" cy="100" r="'+a+'" class="border" fill="none" stroke="'+o+'" stroke-width="'+S.foregroundBorderWidth+'" stroke-dasharray="'+t+',20000" transform="rotate('+-90+',100,100)" />';i.addClass("svg-container").append(z('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==d?d:"")+n+x+'<text class="timer" text-anchor="middle" x="'+f+'" y="'+g+'" style="font-size: '+S.percentageTextSize+"px; "+s+";"+S.textAdditionalCss+'" fill="'+S.fontColor+'"><tspan class="number">'+(null===S.replacePercentageByText?0:S.replacePercentageByText)+'</tspan><tspan class="percent">'+(S.noPercentageSign||null!==S.replacePercentageByText?"":"%")+"</tspan></text>")),1===S.multiPercentageLegend&&function(){var e,t=i.height(),r=i.width(),o=S.percentages,n="";for(e=0;e<o.length;++e){var l=o[e].title,a=o[e].color,c=o[e].percent;n+='<div><span class="color-box" style="background: '+a+'"></span>'+l+", "+c+"%</div>"}i.append(z("<div/>").append(n).attr("style","position:absolute;top:"+t/3+"px;left:"+(r+20)+"px").attr("class","legend-line"))}()}else i.addClass("svg-container").append(z('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful">'+(void 0!==d?d:"")+'<circle cx="100" cy="100" r="57" class="border" fill="'+S.fillColor+'" stroke="'+S.backgroundColor+'" stroke-width="'+u+'" stroke-dasharray="360" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" class="border" fill="none" stroke="'+S.foregroundColor+'" stroke-width="'+S.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-90,100,100)" /><circle cx="100" cy="100" r="'+S.pointSize+'" fill="'+S.pointColor+'" />'+x+'<text class="timer" text-anchor="middle" x="'+f+'" y="'+g+'" style="font-size: '+S.percentageTextSize+"px; "+s+";"+S.textAdditionalCss+'" fill="'+S.fontColor+'"><tspan class="number">'+(null===S.replacePercentageByText?0:S.replacePercentageByText)+'</tspan><tspan class="percent">'+(S.noPercentageSign||null!==S.replacePercentageByText?"":"%")+"</tspan></text>"))}();var h=i.find(".circle"),y=i.find(".timer"),C=30,k=0,m=S.animationStep,w=0,P=0,b=0,v=o,B=3.6*o;S.halfCircle&&(B=3.6*o/2),null!==S.replacePercentageByText&&(v=S.replacePercentageByText),0<S.start&&0<S.target&&(o=S.start/(S.target/100),b=S.target/100),1===S.animation?S.animateInView?z(window).scroll(function(){e()}):l():1!==S.multiPercentage?(h.attr("stroke-dasharray",B+", 20000"),1===S.showPercent?y.find(".number").text(v):(y.find(".number").text(S.target),y.find(".percent").text(""))):null!==S.replacePercentageByText&&(y.find(".number").text(S.replacePercentageByText),y.find(".percent").text(""))})}}(jQuery);